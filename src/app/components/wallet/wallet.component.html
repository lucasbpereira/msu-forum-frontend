<div class="wallet-connect">
  @if (!walletState().isConnected) {
    <div class="connection-options">
      <button
        (click)="connectToHenesys()"
        [disabled]="isSwitchingNetwork()"
        class="primary-btn">
        @if (isSwitchingNetwork()) {
          <span>Signing to Henesys...</span>
        } @else {
          <span>Sign in</span>
        }
      </button>
    </div>
  }
  @else {
    <div class="wallet">
      @if (currentUser(); as userInfo) {
        <div class="user-profile">
          <img class="avatar" [src]="userInfo?.user?.avatar_url">
        </div>
        <div class="user-details">
          <span class="username">{{ userInfo?.user?.username }}</span>
          <span class="role">{{ userInfo?.user?.role }}</span>
          <small class="persistence-status">âœ“ Dados salvos localmente</small>
        </div>
      } @else {
        <msuf-loading></msuf-loading>
      }
      <div class="wallet-info">
        <div class="account-info">

          <span class="label">Conta:</span>
          <span class="address">{{ formatAddress(walletState().account) }}</span>
        </div>

        @if (walletState().balance) {
          <div class="balance-info">
            <span class="label">Saldo:</span>
            <span class="balance">
              {{ walletState().balance!.slice(0, 7) }}
              @if (walletState().chainId?.toUpperCase() == '0X10B3E') {
                <span> NXPC</span>
              } @else {
                <span> ETH</span>
              }
            </span>
          </div>
        }
      </div>



    </div>
  }
        <button (click)="disconnect()" class="disconnect-button">
          Desconectar
        </button>
  @if (error()) {
    <div class="error-message">
      {{ error() }}
    </div>
  }
</div>
